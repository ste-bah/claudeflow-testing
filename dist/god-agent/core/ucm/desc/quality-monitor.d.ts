/**
 * IDESC-001: Intelligent DESC v2 - Continuous Quality Monitoring
 * TASK-IDESC-LEARN-005: Implement Continuous Quality Monitoring
 * Sprint 6: Active Learning
 *
 * Background quality monitoring job that runs periodically to check
 * injection quality metrics and emit alerts when thresholds are exceeded.
 *
 * Implements:
 * - REQ-IDESC-013: Continuous quality monitoring
 * - AC-IDESC-005e: Periodic checks (configurable interval, default 1 hour)
 * - AC-IDESC-005f: Alert emission on quality degradation
 *
 * Constitution:
 * - GUARD-IDESC-006: Graceful error handling in background job
 * - GUARD-IDESC-007: Safe shutdown without data loss
 */
import type { MetricsAggregator } from './metrics-aggregator.js';
import type { IAlert } from '../types.js';
/**
 * Configuration for quality monitor
 */
export interface IQualityMonitorConfig {
    /** Check interval in milliseconds (default: 3600000 = 1 hour) */
    intervalMs: number;
    /** Whether monitoring is enabled (default: true) */
    enabled: boolean;
    /** Callback invoked when an alert is generated */
    onAlert?: (alert: IAlert) => void;
}
/**
 * Quality monitor interface
 */
export interface IQualityMonitor {
    /**
     * Start the quality monitoring job
     * Runs initial check immediately, then at configured interval
     */
    start(): void;
    /**
     * Stop the quality monitoring job
     * Clears the interval timer and stops monitoring
     */
    stop(): void;
    /**
     * Check if monitoring is currently running
     * @returns True if monitor is running
     */
    isRunning(): boolean;
    /**
     * Trigger an immediate quality check
     * Does not affect the scheduled interval checks
     * @returns Array of alerts generated by the check
     */
    checkNow(): Promise<IAlert[]>;
    /**
     * Get timestamp of last quality check
     * @returns Date of last check, or null if no checks performed yet
     */
    getLastCheckTime(): Date | null;
    /**
     * Get total number of checks performed
     * @returns Check count
     */
    getCheckCount(): number;
}
/**
 * QualityMonitor - Background job for continuous quality monitoring
 *
 * Periodically checks injection metrics via MetricsAggregator and emits
 * alerts when quality degradation is detected.
 *
 * Features:
 * - Configurable check interval (default: 1 hour)
 * - Immediate initial check on start
 * - Graceful error handling (GUARD-IDESC-006)
 * - Safe shutdown (GUARD-IDESC-007)
 * - Manual trigger via checkNow()
 */
export declare class QualityMonitor implements IQualityMonitor {
    private readonly metricsAggregator;
    private interval?;
    private running;
    private lastCheckTime;
    private checkCount;
    private readonly config;
    constructor(metricsAggregator: MetricsAggregator, config?: Partial<IQualityMonitorConfig>);
    /**
     * Start the quality monitoring job
     * Implements: AC-IDESC-005e
     */
    start(): void;
    /**
     * Stop the quality monitoring job
     * Implements: GUARD-IDESC-007 (safe shutdown)
     */
    stop(): void;
    /**
     * Check if monitoring is running
     */
    isRunning(): boolean;
    /**
     * Trigger an immediate quality check
     * Implements: AC-IDESC-005f
     */
    checkNow(): Promise<IAlert[]>;
    /**
     * Get timestamp of last check
     */
    getLastCheckTime(): Date | null;
    /**
     * Get total number of checks performed
     */
    getCheckCount(): number;
    /**
     * Internal method to run a quality check
     * Implements: GUARD-IDESC-006 (graceful error handling)
     */
    private runCheck;
}
/**
 * Factory function to create QualityMonitor
 *
 * @param metricsAggregator - MetricsAggregator instance for quality checks
 * @param config - Optional configuration overrides
 * @returns QualityMonitor instance
 *
 * @example
 * ```typescript
 * const monitor = createQualityMonitor(metricsAggregator, {
 *   intervalMs: 1800000, // 30 minutes
 *   onAlert: (alert) => console.log('Alert:', alert.message)
 * });
 * monitor.start();
 * ```
 */
export declare function createQualityMonitor(metricsAggregator: MetricsAggregator, config?: Partial<IQualityMonitorConfig>): QualityMonitor;
//# sourceMappingURL=quality-monitor.d.ts.map